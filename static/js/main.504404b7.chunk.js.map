{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","services/imagesApi.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","searchQuery","page","APIKey","axios","get","then","res","data","hits","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","styles","searchbar","searchForm","this","type","searchFormButton","searchFormButtonLabel","searchFormInput","autocomplete","autofocus","placeholder","onChange","Component","ImageGalleryItem","src","id","alt","srcOriginal","getLargeImageURL","imageGalleryItem","data-source","data-id","imageGalleryItemImage","onClick","evt","target","dataset","source","ImageGallery","images","onImageClick","imageGallery","map","el","webformatURL","largeImageURL","tags","modalRoot","document","querySelector","Modal","handleKeyDown","code","console","log","onClose","handleBackdropClick","event","window","addEventListener","removeEventListener","createPortal","overlay","modal","img","Button","button","App","isLoading","error","showModal","originalImageUrl","fetchImages","imagesApi","prevState","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleSubmitForm","handleClickImage","openModal","closeModal","prevProps","color","height","width","timeout","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.504404b7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2PBXm\",\"img\":\"Modal_img__AYVpQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__2DSQK\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__1KNoo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__3cziB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2PhHg\"};","import axios from \"axios\";\r\n\r\nconst fetchImages = (searchQuery, page = 1) => {\r\n  const APIKey = \"19847070-2f6934a26cdc244bf33deaec0\";\r\n  return axios\r\n    .get(\r\n      `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${APIKey}&image_type=photo&orientation=horizontal&per_page=12`\r\n    )\r\n    .then((res) => res.data.hits);\r\n};\r\n\r\nexport default { fetchImages };\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = { query: \"\" };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.searchbar}>\r\n        <form className={styles.searchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.searchFormButton}>\r\n            <span className={styles.searchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={styles.searchFormInput}\r\n            type=\"text\"\r\n            autocomplete=\"off\"\r\n            autofocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Searchbar;\r\n","import PropTypes from \"prop-types\";\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\n\r\nexport function ImageGalleryItem({\r\n  src,\r\n  id,\r\n  alt,\r\n  srcOriginal,\r\n  getLargeImageURL,\r\n}) {\r\n  const handleClick = (evt) => getLargeImageURL(evt.target.dataset.source);\r\n\r\n  return (\r\n    <li className={styles.imageGalleryItem}>\r\n      <img\r\n        src={src}\r\n        alt={alt}\r\n        data-source={srcOriginal}\r\n        data-id={id}\r\n        className={styles.imageGalleryItemImage}\r\n        onClick={handleClick}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string,\r\n  srcOriginal: PropTypes.string.isRequired,\r\n  id: PropTypes.number,\r\n  getLargeImageURL: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nexport function ImageGallery({ images, onImageClick }) {\r\n  return (\r\n    <ul className={styles.imageGallery}>\r\n      {images.map((el) => (\r\n        <ImageGalleryItem\r\n          key={el.id}\r\n          src={el.webformatURL}\r\n          srcOriginal={el.largeImageURL}\r\n          id={el.id}\r\n          alt={el.tags}\r\n          getLargeImageURL={onImageClick}\r\n        ></ImageGalleryItem>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  onImageClick: PropTypes.func.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    console.log(\"Modal componentDidMount\");\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    console.log(\"Modal componentWillUnmount\");\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      console.log(\"Нажали ESC, нужно закрыть модалку\");\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (event) => {\r\n    // console.log('Кликнули в бекдроп');\r\n    // console.log('currentTarget: ', event.currentTarget);\r\n    // console.log('target: ', event.target);\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.overlay} onClick={this.handleBackdropClick}>\r\n        <div className={styles.modal}>\r\n          <img src={this.props.largeImageURL} alt=\"\" className={styles.img} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" className={styles.button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from \"react\";\nimport imagesApi from \"./services/imagesApi\";\n\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\nimport Modal from \"./components/Modal/Modal\";\nimport Button from \"./components/Button/Button\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nclass App extends Component {\n  state = {\n    images: [],\n    isLoading: false,\n    searchQuery: \"\",\n    page: 1,\n    error: null,\n    showModal: false,\n    originalImageUrl: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n    this.setState({ isLoading: true });\n    imagesApi\n      .fetchImages(searchQuery, page)\n      .then((images) => {\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...images],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      });\n  };\n\n  handleSubmitForm = (query) => {\n    this.setState({ images: [], searchQuery: query, page: 1 });\n  };\n\n  // toggleModal = () => {\n  //   this.setState((state) => ({\n  //     showModal: !state.showModal,\n  //   }));\n  //   this.setState(({ showModal }) => ({\n  //     showModal: !showModal,\n  //   }));\n  //};\n  handleClickImage = (largeImageURL) => {\n    this.openModal(largeImageURL);\n  };\n\n  openModal = (largeImageURL) =>\n    this.setState({ showModal: true, originalImageUrl: largeImageURL });\n\n  closeModal = () => this.setState({ showModal: false, originalImageUrl: \"\" });\n\n  render() {\n    const { images, isLoading, showModal, originalImageUrl } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSubmitForm} />\n        <ImageGallery images={images} onImageClick={this.handleClickImage} />\n        {showModal && (\n          <Modal largeImageURL={originalImageUrl} onClose={this.closeModal} />\n        )}\n        <div className=\"container\">\n          {isLoading && (\n            <Loader\n              type=\"Hearts\"\n              color=\"#3f51b5\"\n              height={80}\n              width={80}\n              timeout={3000}\n            />\n          )}\n          {images.length > 0 && !isLoading && (\n            <Button onClick={this.fetchImages} />\n          )}\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__21YQL\",\"searchForm\":\"Searchbar_searchForm__3TnYz\",\"searchFormButton\":\"Searchbar_searchFormButton__2Q9Qo\",\"searchFormButtonLabel\":\"Searchbar_searchFormButtonLabel__1pUB9\",\"searchFormInput\":\"Searchbar_searchFormInput__1fp6P\"};"],"sourceRoot":""}